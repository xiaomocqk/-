<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="../vue-2.1.3.js"></script>
    <style>
    h2 {
        color: lightskyblue;
        font-size: 24px;
    }
    
    strong {
        color: lightgreen;
        font-size: 24px;
        text-decoration: underline;
    }
    </style>
</head>

<body>
    <h2>#自定义事件 表单输入组件</h2>
    <div id="box1">
        <my-tag></my-tag>
    </div>
    <script>
    Vue.component('my-tag', {
        template: '\
            <span>\
              $\
              <input\
                ref="input"\
                v-bind:value="prop"\
                v-on:input="updateValue($event.target.value)"\
              >\
            </span>\
        ',
        props: ['prop'],
        methods: {
            updateValue: function(value) {
                var formattedValue = value.trim().slice(0, value.indexOf('.') + 3);
                if (formattedValue !== value) {
                    this.$refs.input.value = formattedValue;
                }
                this.$emit('input', Number(formattedValue));
            }
        }
    })
    new Vue({
        el:"#box1"
    })
    </script>
</body>

</html>
